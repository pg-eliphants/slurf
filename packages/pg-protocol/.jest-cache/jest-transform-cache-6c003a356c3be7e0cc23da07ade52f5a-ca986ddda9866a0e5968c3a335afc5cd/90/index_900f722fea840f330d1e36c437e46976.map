{"version":3,"names":["messages_1","cov_253r2cm3wy","s","require","Object","defineProperty","exports","enumerable","get","f","DatabaseError","serializer_1","serialize","parser_1","parse","stream","callback","parser","Parser","on","buffer","Promise","resolve"],"sources":["C:\\repos\\node-postgres\\packages\\pg-protocol\\src\\index.ts"],"sourcesContent":["import { /*BackendMessage,*/ DatabaseError } from './messages';\r\nimport { serialize } from './serializer';\r\nimport { Parser, MessageCallback } from './parser';\r\n\r\nexport function parse(stream: NodeJS.ReadableStream, callback: MessageCallback): Promise<void> {\r\n    const parser = new Parser();\r\n    stream.on('data', (buffer: Buffer) => parser.parse(buffer, callback));\r\n\r\n    // only when the message \"ends\" ( a message boundery? ) so this kinda makes sense, sure\r\n    return new Promise((resolve) => stream.on('end', () => resolve()));\r\n}\r\n\r\nexport { serialize, DatabaseError };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,UAAA;AAAA;AAAA,CAAAC,cAAA,GAAAC,CAAA,OAAAC,OAAA;AAA+D;AAAAF,cAAA,GAAAC,CAAA;AAY3CE,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,UAAA;EAAAC,GAAA,WAAAA,CAAA;IAAA;IAAAP,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAC,CAAA;IAAA,OAZSF,UAAA,CAAAU,aAAa;EAAA;AAAA;AAC1C,MAAAC,YAAA;AAAA;AAAA,CAAAV,cAAA,GAAAC,CAAA,OAAAC,OAAA;AAAyC;AAAAF,cAAA,GAAAC,CAAA;AAWhCE,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,UAAA;EAAAC,GAAA,WAAAA,CAAA;IAAA;IAAAP,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAC,CAAA;IAAA,OAXAS,YAAA,CAAAC,SAAS;EAAA;AAAA;AAClB,MAAAC,QAAA;AAAA;AAAA,CAAAZ,cAAA,GAAAC,CAAA,OAAAC,OAAA;AAEA,SAAgBW,KAAKA,CAACC,MAA6B,EAAEC,QAAyB;EAAA;EAAAf,cAAA,GAAAQ,CAAA;EAC1E,MAAMQ,MAAM;EAAA;EAAA,CAAAhB,cAAA,GAAAC,CAAA,OAAG,IAAIW,QAAA,CAAAK,MAAM,EAAE;EAAC;EAAAjB,cAAA,GAAAC,CAAA;EAC5Ba,MAAM,CAACI,EAAE,CAAC,MAAM,EAAGC,MAAc,IAAK;IAAA;IAAAnB,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAC,CAAA;IAAA,OAAAe,MAAM,CAACH,KAAK,CAACM,MAAM,EAAEJ,QAAQ,CAAC;EAAD,CAAC,CAAC;EAErE;EAAA;EAAAf,cAAA,GAAAC,CAAA;EACA,OAAO,IAAImB,OAAO,CAAEC,OAAO,IAAK;IAAA;IAAArB,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAC,CAAA;IAAA,OAAAa,MAAM,CAACI,EAAE,CAAC,KAAK,EAAE,MAAM;MAAA;MAAAlB,cAAA,GAAAQ,CAAA;MAAAR,cAAA,GAAAC,CAAA;MAAA,OAAAoB,OAAO,EAAE;IAAF,CAAE,CAAC;EAAD,CAAC,CAAC;AACtE;AAAC;AAAArB,cAAA,GAAAC,CAAA;AANDI,OAAA,CAAAQ,KAAA,GAAAA,KAAA"}