bc5627a698c1dd090dc949a346367f1c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Parser = void 0;
const messages_1 = require("./messages");
const buffer_reader_1 = require("./buffer-reader");
const strict_1 = require("node:assert/strict");
// every message is prefixed with a single bye
const CODE_LENGTH = 1;
// every message has an int32 length which includes itself but does
// NOT include the code in the length
const LEN_LENGTH = 4;
const HEADER_LENGTH = CODE_LENGTH + LEN_LENGTH;
const emptyBuffer = Buffer.allocUnsafe(0);
var MessageCodes;
(function (MessageCodes) {
    MessageCodes[MessageCodes["DataRow"] = 68] = "DataRow";
    MessageCodes[MessageCodes["ParseComplete"] = 49] = "ParseComplete";
    MessageCodes[MessageCodes["BindComplete"] = 50] = "BindComplete";
    MessageCodes[MessageCodes["CloseComplete"] = 51] = "CloseComplete";
    MessageCodes[MessageCodes["CommandComplete"] = 67] = "CommandComplete";
    MessageCodes[MessageCodes["ReadyForQuery"] = 90] = "ReadyForQuery";
    MessageCodes[MessageCodes["NoData"] = 110] = "NoData";
    MessageCodes[MessageCodes["NotificationResponse"] = 65] = "NotificationResponse";
    MessageCodes[MessageCodes["AuthenticationResponse"] = 82] = "AuthenticationResponse";
    MessageCodes[MessageCodes["ParameterStatus"] = 83] = "ParameterStatus";
    MessageCodes[MessageCodes["BackendKeyData"] = 75] = "BackendKeyData";
    MessageCodes[MessageCodes["ErrorMessage"] = 69] = "ErrorMessage";
    MessageCodes[MessageCodes["NoticeMessage"] = 78] = "NoticeMessage";
    MessageCodes[MessageCodes["RowDescriptionMessage"] = 84] = "RowDescriptionMessage";
    MessageCodes[MessageCodes["ParameterDescriptionMessage"] = 116] = "ParameterDescriptionMessage";
    MessageCodes[MessageCodes["PortalSuspended"] = 115] = "PortalSuspended";
    MessageCodes[MessageCodes["ReplicationStart"] = 87] = "ReplicationStart";
    MessageCodes[MessageCodes["EmptyQuery"] = 73] = "EmptyQuery";
    MessageCodes[MessageCodes["CopyIn"] = 71] = "CopyIn";
    MessageCodes[MessageCodes["CopyOut"] = 72] = "CopyOut";
    MessageCodes[MessageCodes["CopyDone"] = 99] = "CopyDone";
    MessageCodes[MessageCodes["CopyData"] = 100] = "CopyData"; // d
})(MessageCodes || (MessageCodes = {}));
class Parser {
    buffer = emptyBuffer;
    bufferLength = 0;
    bufferOffset = 0;
    reader = new buffer_reader_1.BufferReader();
    //private mode: Mode;
    // so far the "index.ts" calls the constructor without arguments
    constructor(opts) {
        if (opts?.mode === 'binary') {
            throw new Error('Binary mode not supported yet');
        }
        //this.mode = opts?.mode || 'text';
    }
    parse(buffer, callback) {
        this.mergeBuffer(buffer);
        const bufferFullLength = this.bufferOffset + this.bufferLength;
        let offset = this.bufferOffset;
        while (offset + HEADER_LENGTH <= bufferFullLength) {
            // code is 1 byte long - it identifies the message type
            const code = this.buffer[offset];
            // length is 1 Uint32BE - it is the length of the message EXCLUDING the code
            const length = this.buffer.readUInt32BE(offset + CODE_LENGTH);
            const fullMessageLength = CODE_LENGTH + length;
            if (fullMessageLength + offset <= bufferFullLength) {
                const message = this.handlePacket(offset + HEADER_LENGTH, code, length, this.buffer);
                callback(message);
                offset += fullMessageLength;
            }
            else {
                break;
            }
        }
        if (offset === bufferFullLength) {
            // No more use for the buffer
            this.buffer = emptyBuffer;
            this.bufferLength = 0;
            this.bufferOffset = 0;
        }
        else {
            // Adjust the cursors of remainingBuffer
            this.bufferLength = bufferFullLength - offset;
            this.bufferOffset = offset;
        }
    }
    mergeBuffer(buffer) {
        if (this.bufferLength > 0) {
            const newLength = this.bufferLength + buffer.byteLength;
            const newFullLength = newLength + this.bufferOffset;
            if (newFullLength > this.buffer.byteLength) {
                // We can't concat the new buffer with the remaining one
                let newBuffer;
                if (newLength <= this.buffer.byteLength && this.bufferOffset >= this.bufferLength) {
                    // We can move the relevant part to the beginning of the buffer instead of allocating a new buffer
                    newBuffer = this.buffer;
                }
                else {
                    // Allocate a new larger buffer
                    let newBufferLength = this.buffer.byteLength * 2;
                    while (newLength >= newBufferLength) {
                        newBufferLength *= 2;
                    }
                    newBuffer = Buffer.allocUnsafe(newBufferLength);
                }
                // Move the remaining buffer to the new one
                this.buffer.copy(newBuffer, 0, this.bufferOffset, this.bufferOffset + this.bufferLength);
                this.buffer = newBuffer;
                this.bufferOffset = 0;
            }
            // Concat the new buffer with the remaining one
            buffer.copy(this.buffer, this.bufferOffset + this.bufferLength);
            this.bufferLength = newLength;
        }
        else {
            this.buffer = buffer;
            this.bufferOffset = 0;
            this.bufferLength = buffer.byteLength;
        }
    }
    handlePacket(offset, code, length, bytes) {
        switch (code) {
            case 50 /* BindComplete */:
                return messages_1.bindComplete;
            case 49 /* ParseComplete */:
                return messages_1.parseComplete;
            case 51 /* CloseComplete */:
                return messages_1.closeComplete;
            case 110 /* NoData */:
                return messages_1.noData;
            case 115 /* PortalSuspended */:
                return messages_1.portalSuspended;
            case 99 /* CopyDone */:
                return messages_1.copyDone;
            case 87 /* ReplicationStart */:
                return messages_1.replicationStart;
            case 73 /* EmptyQuery */:
                return messages_1.emptyQuery;
            case 68 /* DataRow */:
                return this.parseDataRowMessage(offset, length, bytes);
            case 67 /* CommandComplete */:
                return this.parseCommandCompleteMessage(offset, length, bytes);
            case 90 /* ReadyForQuery */:
                return this.parseReadyForQueryMessage(offset, length, bytes);
            case 65 /* NotificationResponse */:
                return this.parseNotificationMessage(offset, length, bytes);
            case 82 /* AuthenticationResponse */:
                return this.parseAuthenticationResponse(offset, length, bytes);
            case 83 /* ParameterStatus */:
                return this.parseParameterStatusMessage(offset, length, bytes);
            case 75 /* BackendKeyData */:
                return this.parseBackendKeyData(offset, length, bytes);
            case 69 /* ErrorMessage */:
                return this.parseErrorMessage(offset, length, bytes, 'error');
            case 78 /* NoticeMessage */:
                return this.parseErrorMessage(offset, length, bytes, 'notice');
            case 84 /* RowDescriptionMessage */:
                return this.parseRowDescriptionMessage(offset, length, bytes);
            case 116 /* ParameterDescriptionMessage */:
                return this.parseParameterDescriptionMessage(offset, length, bytes);
            case 71 /* CopyIn */:
                return this.parseCopyInMessage(offset, length, bytes);
            case 72 /* CopyOut */:
                return this.parseCopyOutMessage(offset, length, bytes);
            case 100 /* CopyData */:
                return this.parseCopyData(offset, length, bytes);
            default:
                strict_1.strict.fail(`unknown message code: ${code.toString(16)}`);
        }
    }
    parseReadyForQueryMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const status = this.reader.string(1);
        return new messages_1.ReadyForQueryMessage(length, status);
    }
    parseCommandCompleteMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const text = this.reader.cstring();
        return new messages_1.CommandCompleteMessage(length, text);
    }
    parseCopyData(offset, length, bytes) {
        const chunk = bytes.slice(offset, offset + (length - 4));
        return new messages_1.CopyDataMessage(length, chunk);
    }
    parseCopyInMessage(offset, length, bytes) {
        return this.parseCopyMessage(offset, length, bytes, 'copyInResponse');
    }
    parseCopyOutMessage(offset, length, bytes) {
        return this.parseCopyMessage(offset, length, bytes, 'copyOutResponse');
    }
    parseCopyMessage(offset, length, bytes, messageName) {
        this.reader.setBuffer(offset, bytes);
        const isBinary = this.reader.byte() !== 0;
        const columnCount = this.reader.int16();
        const message = new messages_1.CopyResponse(length, messageName, isBinary, columnCount);
        for (let i = 0; i < columnCount; i++) {
            message.columnTypes[i] = this.reader.int16();
        }
        return message;
    }
    parseNotificationMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const processId = this.reader.int32();
        const channel = this.reader.cstring();
        const payload = this.reader.cstring();
        return new messages_1.NotificationResponseMessage(length, processId, channel, payload);
    }
    parseRowDescriptionMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const fieldCount = this.reader.int16();
        const message = new messages_1.RowDescriptionMessage(length, fieldCount);
        for (let i = 0; i < fieldCount; i++) {
            message.fields[i] = this.parseField();
        }
        return message;
    }
    parseField() {
        const name = this.reader.cstring();
        const tableID = this.reader.int32();
        const columnID = this.reader.int16();
        const dataTypeID = this.reader.int32();
        const dataTypeSize = this.reader.int16();
        const dataTypeModifier = this.reader.int32();
        const mode = this.reader.int16() === 0 ? 'text' : 'binary';
        return new messages_1.Field(name, tableID, columnID, dataTypeID, dataTypeSize, dataTypeModifier, mode);
    }
    parseParameterDescriptionMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const parameterCount = this.reader.int16();
        const message = new messages_1.ParameterDescriptionMessage(length, parameterCount);
        for (let i = 0; i < parameterCount; i++) {
            message.dataTypeIDs[i] = this.reader.int32();
        }
        return message;
    }
    parseDataRowMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const fieldCount = this.reader.int16();
        const fields = new Array(fieldCount);
        for (let i = 0; i < fieldCount; i++) {
            const len = this.reader.int32();
            // a -1 for length means the value of the field is null
            fields[i] = len === -1 ? null : this.reader.string(len);
        }
        return new messages_1.DataRowMessage(length, fields);
    }
    parseParameterStatusMessage(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const name = this.reader.cstring();
        const value = this.reader.cstring();
        return new messages_1.ParameterStatusMessage(length, name, value);
    }
    parseBackendKeyData(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const processID = this.reader.int32();
        const secretKey = this.reader.int32();
        return new messages_1.BackendKeyDataMessage(length, processID, secretKey);
    }
    parseAuthenticationResponse(offset, length, bytes) {
        this.reader.setBuffer(offset, bytes);
        const code = this.reader.int32();
        // TODO(bmc): maybe better types here
        const message = {
            name: 'authenticationOk',
            length
        };
        switch (code) {
            case 0: // AuthenticationOk
                break;
            case 3: // AuthenticationCleartextPassword
                if (message.length === 8) {
                    message.name = 'authenticationCleartextPassword';
                }
                break;
            case 5: // AuthenticationMD5Password
                if (message.length === 12) {
                    message.name = 'authenticationMD5Password';
                    const salt = this.reader.bytes(4);
                    return new messages_1.AuthenticationMD5Password(length, salt);
                }
                break;
            case 10: // AuthenticationSASL
                message.name = 'authenticationSASL';
                message.mechanisms = [];
                let mechanism;
                do {
                    mechanism = this.reader.cstring();
                    if (mechanism) {
                        message.mechanisms.push(mechanism);
                    }
                } while (mechanism);
                break;
            case 11: // AuthenticationSASLContinue
                message.name = 'authenticationSASLContinue';
                message.data = this.reader.string(length - 8);
                break;
            case 12: // AuthenticationSASLFinal
                message.name = 'authenticationSASLFinal';
                message.data = this.reader.string(length - 8);
                break;
            default:
                throw new Error('Unknown authenticationOk message type ' + code);
        }
        return message;
    }
    parseErrorMessage(offset, length, bytes, name) {
        this.reader.setBuffer(offset, bytes);
        const fields = {};
        let fieldType = this.reader.string(1);
        while (fieldType !== '\0') {
            fields[fieldType] = this.reader.cstring();
            fieldType = this.reader.string(1);
        }
        const messageValue = fields.M;
        const message = name === 'notice' ? new messages_1.NoticeMessage(length, messageValue) : new messages_1.DatabaseError(messageValue, length, name);
        message.severity = fields.S;
        message.code = fields.C;
        message.detail = fields.D;
        message.hint = fields.H;
        message.position = fields.P;
        message.internalPosition = fields.p;
        message.internalQuery = fields.q;
        message.where = fields.W;
        message.schema = fields.s;
        message.table = fields.t;
        message.column = fields.c;
        message.dataType = fields.d;
        message.constraint = fields.n;
        message.file = fields.F;
        message.line = fields.L;
        message.routine = fields.R;
        return message;
    }
}
exports.Parser = Parser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXHJlcG9zXFxub2RlLXBvc3RncmVzXFxwYWNrYWdlc1xccGctcHJvdG9jb2xcXHNyY1xccGFyc2VyLnRzIiwibWFwcGluZ3MiOiI7OztBQUNBLHlDQTBCb0I7QUFDcEIsbURBQStDO0FBQy9DLCtDQUFzRDtBQUV0RCw4Q0FBOEM7QUFDOUMsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDO0FBQ3RCLG1FQUFtRTtBQUNuRSxxQ0FBcUM7QUFDckMsTUFBTSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBRXJCLE1BQU0sYUFBYSxHQUFHLFdBQVcsR0FBRyxVQUFVLENBQUM7QUFPL0MsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQU0xQyxJQUFXLFlBdUJWO0FBdkJELFdBQVcsWUFBWTtJQUNuQixzREFBYyxDQUFBO0lBQ2Qsa0VBQW9CLENBQUE7SUFDcEIsZ0VBQW1CLENBQUE7SUFDbkIsa0VBQW9CLENBQUE7SUFDcEIsc0VBQXNCLENBQUE7SUFDdEIsa0VBQW9CLENBQUE7SUFDcEIscURBQWEsQ0FBQTtJQUNiLGdGQUEyQixDQUFBO0lBQzNCLG9GQUE2QixDQUFBO0lBQzdCLHNFQUFzQixDQUFBO0lBQ3RCLG9FQUFxQixDQUFBO0lBQ3JCLGdFQUFtQixDQUFBO0lBQ25CLGtFQUFvQixDQUFBO0lBQ3BCLGtGQUE0QixDQUFBO0lBQzVCLCtGQUFrQyxDQUFBO0lBQ2xDLHVFQUFzQixDQUFBO0lBQ3RCLHdFQUF1QixDQUFBO0lBQ3ZCLDREQUFpQixDQUFBO0lBQ2pCLG9EQUFhLENBQUE7SUFDYixzREFBYyxDQUFBO0lBQ2Qsd0RBQWUsQ0FBQTtJQUNmLHlEQUFlLENBQUEsQ0FBQyxJQUFJO0FBQ3hCLENBQUMsRUF2QlUsWUFBWSxLQUFaLFlBQVksUUF1QnRCO0FBSUQsTUFBYSxNQUFNO0lBQ1AsTUFBTSxHQUFXLFdBQVcsQ0FBQztJQUM3QixZQUFZLEdBQVcsQ0FBQyxDQUFDO0lBQ3pCLFlBQVksR0FBVyxDQUFDLENBQUM7SUFDekIsTUFBTSxHQUFH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QUFJLENBQUMsQ0FBQztRQUVoSCxPQUFPLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDNUIsT0FBTyxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUMxQixPQUFPLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDeEIsT0FBTyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzVCLE9BQU8sQ0FBQyxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNqQyxPQUFPLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDekIsT0FBTyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzFCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUN6QixPQUFPLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDMUIsT0FBTyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzVCLE9BQU8sQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM5QixPQUFPLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDeEIsT0FBTyxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUMzQixPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0NBQ0o7QUF4VEQsd0JBd1RDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxyZXBvc1xcbm9kZS1wb3N0Z3Jlc1xccGFja2FnZXNcXHBnLXByb3RvY29sXFxzcmNcXHBhcnNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFuc2Zvcm1PcHRpb25zIH0gZnJvbSAnc3RyZWFtJztcclxuaW1wb3J0IHtcclxuICAgIE1vZGUsXHJcbiAgICBiaW5kQ29tcGxldGUsXHJcbiAgICBwYXJzZUNvbXBsZXRlLFxyXG4gICAgY2xvc2VDb21wbGV0ZSxcclxuICAgIG5vRGF0YSxcclxuICAgIHBvcnRhbFN1c3BlbmRlZCxcclxuICAgIGNvcHlEb25lLFxyXG4gICAgcmVwbGljYXRpb25TdGFydCxcclxuICAgIGVtcHR5UXVlcnksXHJcbiAgICBSZWFkeUZvclF1ZXJ5TWVzc2FnZSxcclxuICAgIENvbW1hbmRDb21wbGV0ZU1lc3NhZ2UsXHJcbiAgICBDb3B5RGF0YU1lc3NhZ2UsXHJcbiAgICBDb3B5UmVzcG9uc2UsXHJcbiAgICBOb3RpZmljYXRpb25SZXNwb25zZU1lc3NhZ2UsXHJcbiAgICBSb3dEZXNjcmlwdGlvbk1lc3NhZ2UsXHJcbiAgICBQYXJhbWV0ZXJEZXNjcmlwdGlvbk1lc3NhZ2UsXHJcbiAgICBGaWVsZCxcclxuICAgIERhdGFSb3dNZXNzYWdlLFxyXG4gICAgUGFyYW1ldGVyU3RhdHVzTWVzc2FnZSxcclxuICAgIEJhY2tlbmRLZXlEYXRhTWVzc2FnZSxcclxuICAgIERhdGFiYXNlRXJyb3IsXHJcbiAgICBCYWNrZW5kTWVzc2FnZSxcclxuICAgIE1lc3NhZ2VOYW1lLFxyXG4gICAgQXV0aGVudGljYXRpb25NRDVQYXNzd29yZCxcclxuICAgIE5vdGljZU1lc3NhZ2VcclxufSBmcm9tICcuL21lc3NhZ2VzJztcclxuaW1wb3J0IHsgQnVmZmVyUmVhZGVyIH0gZnJvbSAnLi9idWZmZXItcmVhZGVyJztcclxuaW1wb3J0IHsgc3RyaWN0IGFzIGFzc2VydCB9IGZyb20gJ25vZGU6YXNzZXJ0L3N0cmljdCc7XHJcblxyXG4vLyBldmVyeSBtZXNzYWdlIGlzIHByZWZpeGVkIHdpdGggYSBzaW5nbGUgYnllXHJcbmNvbnN0IENPREVfTEVOR1RIID0gMTtcclxuLy8gZXZlcnkgbWVzc2FnZSBoYXMgYW4gaW50MzIgbGVuZ3RoIHdoaWNoIGluY2x1ZGVzIGl0c2VsZiBidXQgZG9lc1xyXG4vLyBOT1QgaW5jbHVkZSB0aGUgY29kZSBpbiB0aGUgbGVuZ3RoXHJcbmNvbnN0IExFTl9MRU5HVEggPSA0O1xyXG5cclxuY29uc3QgSEVBREVSX0xFTkdUSCA9IENPREVfTEVOR1RIICsgTEVOX0xFTkdUSDtcclxuXHJcbmV4cG9ydCB0eXBlIFBhY2tldCA9IHtcclxuICAgIGNvZGU6IG51bWJlcjtcclxuICAgIHBhY2tldDogQnVmZmVyO1xyXG59O1xyXG5cclxuY29uc3QgZW1wdHlCdWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMCk7XHJcblxyXG50eXBlIFN0cmVhbU9wdGlvbnMgPSBUcmFuc2Zvcm1PcHRpb25zICYge1xyXG4gICAgbW9kZTogTW9kZTtcclxufTtcclxuXHJcbmNvbnN0IGVudW0gTWVzc2FnZUNvZGVzIHtcclxuICAgIERhdGFSb3cgPSAweDQ0LCAvLyBEXHJcbiAgICBQYXJzZUNvbXBsZXRlID0gMHgzMSwgLy8gMVxyXG4gICAgQmluZENvbXBsZXRlID0gMHgzMiwgLy8gMlxyXG4gICAgQ2xvc2VDb21wbGV0ZSA9IDB4MzMsIC8vIDNcclxuICAgIENvbW1hbmRDb21wbGV0ZSA9IDB4NDMsIC8vIENcclxuICAgIFJlYWR5Rm9yUXVlcnkgPSAweDVhLCAvLyBaXHJcbiAgICBOb0RhdGEgPSAweDZlLCAvLyBuXHJcbiAgICBOb3RpZmljYXRpb25SZXNwb25zZSA9IDB4NDEsIC8vIEFcclxuICAgIEF1dGhlbnRpY2F0aW9uUmVzcG9uc2UgPSAweDUyLCAvLyBSXHJcbiAgICBQYXJhbWV0ZXJTdGF0dXMgPSAweDUzLCAvLyBTXHJcbiAgICBCYWNrZW5kS2V5RGF0YSA9IDB4NGIsIC8vIEtcclxuICAgIEVycm9yTWVzc2FnZSA9IDB4NDUsIC8vIEVcclxuICAgIE5vdGljZU1lc3NhZ2UgPSAweDRlLCAvLyBOXHJcbiAgICBSb3dEZXNjcmlwdGlvbk1lc3NhZ2UgPSAweDU0LCAvLyBUXHJcbiAgICBQYXJhbWV0ZXJEZXNjcmlwdGlvbk1lc3NhZ2UgPSAweDc0LCAvLyB0XHJcbiAgICBQb3J0YWxTdXNwZW5kZWQgPSAweDczLCAvLyBzXHJcbiAgICBSZXBsaWNhdGlvblN0YXJ0ID0gMHg1NywgLy8gV1xyXG4gICAgRW1wdHlRdWVyeSA9IDB4NDksIC8vIElcclxuICAgIENvcHlJbiA9IDB4NDcsIC8vIEdcclxuICAgIENvcHlPdXQgPSAweDQ4LCAvLyBIXHJcbiAgICBDb3B5RG9uZSA9IDB4NjMsIC8vIGNcclxuICAgIENvcHlEYXRhID0gMHg2NCAvLyBkXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1lc3NhZ2VDYWxsYmFjayA9IChtc2c6IEJhY2tlbmRNZXNzYWdlKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhcnNlciB7XHJcbiAgICBwcml2YXRlIGJ1ZmZlcjogQnVmZmVyID0gZW1wdHlCdWZmZXI7XHJcbiAgICBwcml2YXRlIGJ1ZmZlckxlbmd0aDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgYnVmZmVyT2Zmc2V0OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSByZWFkZXIgPSBuZXcgQnVmZmVyUmVhZGVyKCk7XHJcbiAgICAvL3ByaXZhdGUgbW9kZTogTW9kZTtcclxuXHJcbiAgICAvLyBzbyBmYXIgdGhlIFwiaW5kZXgudHNcIiBjYWxscyB0aGUgY29uc3RydWN0b3Igd2l0aG91dCBhcmd1bWVudHNcclxuICAgIGNvbnN0cnVjdG9yKG9wdHM/OiBTdHJlYW1PcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdHM/Lm1vZGUgPT09ICdiaW5hcnknKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmluYXJ5IG1vZGUgbm90IHN1cHBvcnRlZCB5ZXQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aGlzLm1vZGUgPSBvcHRzPy5tb2RlIHx8ICd0ZXh0JztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyc2UoYnVmZmVyOiBCdWZmZXIsIGNhbGxiYWNrOiBNZXNzYWdlQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm1lcmdlQnVmZmVyKGJ1ZmZlcik7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyRnVsbExlbmd0aCA9IHRoaXMuYnVmZmVyT2Zmc2V0ICsgdGhpcy5idWZmZXJMZW5ndGg7XHJcbiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuYnVmZmVyT2Zmc2V0O1xyXG4gICAgICAgIHdoaWxlIChvZmZzZXQgKyBIRUFERVJfTEVOR1RIIDw9IGJ1ZmZlckZ1bGxMZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gY29kZSBpcyAxIGJ5dGUgbG9uZyAtIGl0IGlkZW50aWZpZXMgdGhlIG1lc3NhZ2UgdHlwZVxyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gdGhpcy5idWZmZXJbb2Zmc2V0XTtcclxuICAgICAgICAgICAgLy8gbGVuZ3RoIGlzIDEgVWludDMyQkUgLSBpdCBpcyB0aGUgbGVuZ3RoIG9mIHRoZSBtZXNzYWdlIEVYQ0xVRElORyB0aGUgY29kZVxyXG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmJ1ZmZlci5yZWFkVUludDMyQkUob2Zmc2V0ICsgQ09ERV9MRU5HVEgpO1xyXG4gICAgICAgICAgICBjb25zdCBmdWxsTWVzc2FnZUxlbmd0aCA9IENPREVfTEVOR1RIICsgbGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoZnVsbE1lc3NhZ2VMZW5ndGggKyBvZmZzZXQgPD0gYnVmZmVyRnVsbExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuaGFuZGxlUGFja2V0KG9mZnNldCArIEhFQURFUl9MRU5HVEgsIGNvZGUsIGxlbmd0aCwgdGhpcy5idWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gZnVsbE1lc3NhZ2VMZW5ndGg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2Zmc2V0ID09PSBidWZmZXJGdWxsTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIG1vcmUgdXNlIGZvciB0aGUgYnVmZmVyXHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gZW1wdHlCdWZmZXI7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyTGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgdGhpcy5idWZmZXJPZmZzZXQgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEFkanVzdCB0aGUgY3Vyc29ycyBvZiByZW1haW5pbmdCdWZmZXJcclxuICAgICAgICAgICAgdGhpcy5idWZmZXJMZW5ndGggPSBidWZmZXJGdWxsTGVuZ3RoIC0gb2Zmc2V0O1xyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlck9mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtZXJnZUJ1ZmZlcihidWZmZXI6IEJ1ZmZlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlckxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGVuZ3RoID0gdGhpcy5idWZmZXJMZW5ndGggKyBidWZmZXIuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgbmV3RnVsbExlbmd0aCA9IG5ld0xlbmd0aCArIHRoaXMuYnVmZmVyT2Zmc2V0O1xyXG4gICAgICAgICAgICBpZiAobmV3RnVsbExlbmd0aCA+IHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGNhbid0IGNvbmNhdCB0aGUgbmV3IGJ1ZmZlciB3aXRoIHRoZSByZW1haW5pbmcgb25lXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3QnVmZmVyOiBCdWZmZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3TGVuZ3RoIDw9IHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGggJiYgdGhpcy5idWZmZXJPZmZzZXQgPj0gdGhpcy5idWZmZXJMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW4gbW92ZSB0aGUgcmVsZXZhbnQgcGFydCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBidWZmZXIgaW5zdGVhZCBvZiBhbGxvY2F0aW5nIGEgbmV3IGJ1ZmZlclxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0J1ZmZlciA9IHRoaXMuYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBbGxvY2F0ZSBhIG5ldyBsYXJnZXIgYnVmZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0J1ZmZlckxlbmd0aCA9IHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGggKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChuZXdMZW5ndGggPj0gbmV3QnVmZmVyTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0J1ZmZlckxlbmd0aCAqPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXdCdWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobmV3QnVmZmVyTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhlIHJlbWFpbmluZyBidWZmZXIgdG8gdGhlIG5ldyBvbmVcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLmNvcHkobmV3QnVmZmVyLCAwLCB0aGlzLmJ1ZmZlck9mZnNldCwgdGhpcy5idWZmZXJPZmZzZXQgKyB0aGlzLmJ1ZmZlckxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ld0J1ZmZlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyT2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDb25jYXQgdGhlIG5ldyBidWZmZXIgd2l0aCB0aGUgcmVtYWluaW5nIG9uZVxyXG4gICAgICAgICAgICBidWZmZXIuY29weSh0aGlzLmJ1ZmZlciwgdGhpcy5idWZmZXJPZmZzZXQgKyB0aGlzLmJ1ZmZlckxlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyTGVuZ3RoID0gbmV3TGVuZ3RoO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xyXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlck9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyTGVuZ3RoID0gYnVmZmVyLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlUGFja2V0KG9mZnNldDogbnVtYmVyLCBjb2RlOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyKTogQmFja2VuZE1lc3NhZ2Uge1xyXG4gICAgICAgIHN3aXRjaCAoY29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VDb2Rlcy5CaW5kQ29tcGxldGU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluZENvbXBsZXRlO1xyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VDb2Rlcy5QYXJzZUNvbXBsZXRlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ29tcGxldGU7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZUNvZGVzLkNsb3NlQ29tcGxldGU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xvc2VDb21wbGV0ZTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuTm9EYXRhOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vRGF0YTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuUG9ydGFsU3VzcGVuZGVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcnRhbFN1c3BlbmRlZDtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuQ29weURvbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29weURvbmU7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZUNvZGVzLlJlcGxpY2F0aW9uU3RhcnQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGljYXRpb25TdGFydDtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuRW1wdHlRdWVyeTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eVF1ZXJ5O1xyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VDb2Rlcy5EYXRhUm93OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VEYXRhUm93TWVzc2FnZShvZmZzZXQsIGxlbmd0aCwgYnl0ZXMpO1xyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VDb2Rlcy5Db21tYW5kQ29tcGxldGU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUNvbW1hbmRDb21wbGV0ZU1lc3NhZ2Uob2Zmc2V0LCBsZW5ndGgsIGJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuUmVhZHlGb3JRdWVyeTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlUmVhZHlGb3JRdWVyeU1lc3NhZ2Uob2Zmc2V0LCBsZW5ndGgsIGJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuTm90aWZpY2F0aW9uUmVzcG9uc2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU5vdGlmaWNhdGlvbk1lc3NhZ2Uob2Zmc2V0LCBsZW5ndGgsIGJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuQXV0aGVudGljYXRpb25SZXNwb25zZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlQXV0aGVudGljYXRpb25SZXNwb25zZShvZmZzZXQsIGxlbmd0aCwgYnl0ZXMpO1xyXG4gICAgICAgICAgICBjYXNlIE1lc3NhZ2VDb2Rlcy5QYXJhbWV0ZXJTdGF0dXM6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVBhcmFtZXRlclN0YXR1c01lc3NhZ2Uob2Zmc2V0LCBsZW5ndGgsIGJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuQmFja2VuZEtleURhdGE6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUJhY2tlbmRLZXlEYXRhKG9mZnNldCwgbGVuZ3RoLCBieXRlcyk7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZUNvZGVzLkVycm9yTWVzc2FnZTpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRXJyb3JNZXNzYWdlKG9mZnNldCwgbGVuZ3RoLCBieXRlcywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZUNvZGVzLk5vdGljZU1lc3NhZ2U6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVycm9yTWVzc2FnZShvZmZzZXQsIGxlbmd0aCwgYnl0ZXMsICdub3RpY2UnKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuUm93RGVzY3JpcHRpb25NZXNzYWdlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VSb3dEZXNjcmlwdGlvbk1lc3NhZ2Uob2Zmc2V0LCBsZW5ndGgsIGJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuUGFyYW1ldGVyRGVzY3JpcHRpb25NZXNzYWdlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VQYXJhbWV0ZXJEZXNjcmlwdGlvbk1lc3NhZ2Uob2Zmc2V0LCBsZW5ndGgsIGJ5dGVzKTtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlQ29kZXMuQ29weUluOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VDb3B5SW5NZXNzYWdlKG9mZnNldCwgbGVuZ3RoLCBieXRlcyk7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZUNvZGVzLkNvcHlPdXQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUNvcHlPdXRNZXNzYWdlKG9mZnNldCwgbGVuZ3RoLCBieXRlcyk7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZUNvZGVzLkNvcHlEYXRhOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VDb3B5RGF0YShvZmZzZXQsIGxlbmd0aCwgYnl0ZXMpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0LmZhaWwoYHVua25vd24gbWVzc2FnZSBjb2RlOiAke2NvZGUudG9TdHJpbmcoMTYpfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlUmVhZHlGb3JRdWVyeU1lc3NhZ2Uob2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIuc2V0QnVmZmVyKG9mZnNldCwgYnl0ZXMpO1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMucmVhZGVyLnN0cmluZygxKTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlYWR5Rm9yUXVlcnlNZXNzYWdlKGxlbmd0aCwgc3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQ29tbWFuZENvbXBsZXRlTWVzc2FnZShvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIGJ5dGVzOiBCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLnJlYWRlci5zZXRCdWZmZXIob2Zmc2V0LCBieXRlcyk7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMucmVhZGVyLmNzdHJpbmcoKTtcclxuICAgICAgICByZXR1cm4gbmV3IENvbW1hbmRDb21wbGV0ZU1lc3NhZ2UobGVuZ3RoLCB0ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQ29weURhdGEob2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgY2h1bmsgPSBieXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIChsZW5ndGggLSA0KSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb3B5RGF0YU1lc3NhZ2UobGVuZ3RoLCBjaHVuayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZUNvcHlJbk1lc3NhZ2Uob2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VDb3B5TWVzc2FnZShvZmZzZXQsIGxlbmd0aCwgYnl0ZXMsICdjb3B5SW5SZXNwb25zZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VDb3B5T3V0TWVzc2FnZShvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIGJ5dGVzOiBCdWZmZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUNvcHlNZXNzYWdlKG9mZnNldCwgbGVuZ3RoLCBieXRlcywgJ2NvcHlPdXRSZXNwb25zZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VDb3B5TWVzc2FnZShvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIGJ5dGVzOiBCdWZmZXIsIG1lc3NhZ2VOYW1lOiBNZXNzYWdlTmFtZSkge1xyXG4gICAgICAgIHRoaXMucmVhZGVyLnNldEJ1ZmZlcihvZmZzZXQsIGJ5dGVzKTtcclxuICAgICAgICBjb25zdCBpc0JpbmFyeSA9IHRoaXMucmVhZGVyLmJ5dGUoKSAhPT0gMDtcclxuICAgICAgICBjb25zdCBjb2x1bW5Db3VudCA9IHRoaXMucmVhZGVyLmludDE2KCk7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBDb3B5UmVzcG9uc2UobGVuZ3RoLCBtZXNzYWdlTmFtZSwgaXNCaW5hcnksIGNvbHVtbkNvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHVtbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbWVzc2FnZS5jb2x1bW5UeXBlc1tpXSA9IHRoaXMucmVhZGVyLmludDE2KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VOb3RpZmljYXRpb25NZXNzYWdlKG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYnl0ZXM6IEJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMucmVhZGVyLnNldEJ1ZmZlcihvZmZzZXQsIGJ5dGVzKTtcclxuICAgICAgICBjb25zdCBwcm9jZXNzSWQgPSB0aGlzLnJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLnJlYWRlci5jc3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHRoaXMucmVhZGVyLmNzdHJpbmcoKTtcclxuICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvblJlc3BvbnNlTWVzc2FnZShsZW5ndGgsIHByb2Nlc3NJZCwgY2hhbm5lbCwgcGF5bG9hZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVJvd0Rlc2NyaXB0aW9uTWVzc2FnZShvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIGJ5dGVzOiBCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLnJlYWRlci5zZXRCdWZmZXIob2Zmc2V0LCBieXRlcyk7XHJcbiAgICAgICAgY29uc3QgZmllbGRDb3VudCA9IHRoaXMucmVhZGVyLmludDE2KCk7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBSb3dEZXNjcmlwdGlvbk1lc3NhZ2UobGVuZ3RoLCBmaWVsZENvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBtZXNzYWdlLmZpZWxkc1tpXSA9IHRoaXMucGFyc2VGaWVsZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlRmllbGQoKTogRmllbGQge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLnJlYWRlci5jc3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgdGFibGVJRCA9IHRoaXMucmVhZGVyLmludDMyKCk7XHJcbiAgICAgICAgY29uc3QgY29sdW1uSUQgPSB0aGlzLnJlYWRlci5pbnQxNigpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFUeXBlSUQgPSB0aGlzLnJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFUeXBlU2l6ZSA9IHRoaXMucmVhZGVyLmludDE2KCk7XHJcbiAgICAgICAgY29uc3QgZGF0YVR5cGVNb2RpZmllciA9IHRoaXMucmVhZGVyLmludDMyKCk7XHJcbiAgICAgICAgY29uc3QgbW9kZSA9IHRoaXMucmVhZGVyLmludDE2KCkgPT09IDAgPyAndGV4dCcgOiAnYmluYXJ5JztcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkKG5hbWUsIHRhYmxlSUQsIGNvbHVtbklELCBkYXRhVHlwZUlELCBkYXRhVHlwZVNpemUsIGRhdGFUeXBlTW9kaWZpZXIsIG1vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VQYXJhbWV0ZXJEZXNjcmlwdGlvbk1lc3NhZ2Uob2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIuc2V0QnVmZmVyKG9mZnNldCwgYnl0ZXMpO1xyXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlckNvdW50ID0gdGhpcy5yZWFkZXIuaW50MTYoKTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IFBhcmFtZXRlckRlc2NyaXB0aW9uTWVzc2FnZShsZW5ndGgsIHBhcmFtZXRlckNvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtZXRlckNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhVHlwZUlEc1tpXSA9IHRoaXMucmVhZGVyLmludDMyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VEYXRhUm93TWVzc2FnZShvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIGJ5dGVzOiBCdWZmZXIpIHtcclxuICAgICAgICB0aGlzLnJlYWRlci5zZXRCdWZmZXIob2Zmc2V0LCBieXRlcyk7XHJcbiAgICAgICAgY29uc3QgZmllbGRDb3VudCA9IHRoaXMucmVhZGVyLmludDE2KCk7XHJcbiAgICAgICAgY29uc3QgZmllbGRzOiBhbnlbXSA9IG5ldyBBcnJheShmaWVsZENvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsZW4gPSB0aGlzLnJlYWRlci5pbnQzMigpO1xyXG4gICAgICAgICAgICAvLyBhIC0xIGZvciBsZW5ndGggbWVhbnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBpcyBudWxsXHJcbiAgICAgICAgICAgIGZpZWxkc1tpXSA9IGxlbiA9PT0gLTEgPyBudWxsIDogdGhpcy5yZWFkZXIuc3RyaW5nKGxlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0YVJvd01lc3NhZ2UobGVuZ3RoLCBmaWVsZHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VQYXJhbWV0ZXJTdGF0dXNNZXNzYWdlKG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYnl0ZXM6IEJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMucmVhZGVyLnNldEJ1ZmZlcihvZmZzZXQsIGJ5dGVzKTtcclxuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5yZWFkZXIuY3N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5yZWFkZXIuY3N0cmluZygpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGFyYW1ldGVyU3RhdHVzTWVzc2FnZShsZW5ndGgsIG5hbWUsIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHBhcnNlQmFja2VuZEtleURhdGEob2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIuc2V0QnVmZmVyKG9mZnNldCwgYnl0ZXMpO1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NJRCA9IHRoaXMucmVhZGVyLmludDMyKCk7XHJcbiAgICAgICAgY29uc3Qgc2VjcmV0S2V5ID0gdGhpcy5yZWFkZXIuaW50MzIoKTtcclxuICAgICAgICByZXR1cm4gbmV3IEJhY2tlbmRLZXlEYXRhTWVzc2FnZShsZW5ndGgsIHByb2Nlc3NJRCwgc2VjcmV0S2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFyc2VBdXRoZW50aWNhdGlvblJlc3BvbnNlKG9mZnNldDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYnl0ZXM6IEJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMucmVhZGVyLnNldEJ1ZmZlcihvZmZzZXQsIGJ5dGVzKTtcclxuICAgICAgICBjb25zdCBjb2RlID0gdGhpcy5yZWFkZXIuaW50MzIoKTtcclxuICAgICAgICAvLyBUT0RPKGJtYyk6IG1heWJlIGJldHRlciB0eXBlcyBoZXJlXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZTogQmFja2VuZE1lc3NhZ2UgJiBhbnkgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdhdXRoZW50aWNhdGlvbk9rJyxcclxuICAgICAgICAgICAgbGVuZ3RoXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDogLy8gQXV0aGVudGljYXRpb25Pa1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzogLy8gQXV0aGVudGljYXRpb25DbGVhcnRleHRQYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGVuZ3RoID09PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5uYW1lID0gJ2F1dGhlbnRpY2F0aW9uQ2xlYXJ0ZXh0UGFzc3dvcmQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNTogLy8gQXV0aGVudGljYXRpb25NRDVQYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UubGVuZ3RoID09PSAxMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICdhdXRoZW50aWNhdGlvbk1ENVBhc3N3b3JkJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWx0ID0gdGhpcy5yZWFkZXIuYnl0ZXMoNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdXRoZW50aWNhdGlvbk1ENVBhc3N3b3JkKGxlbmd0aCwgc2FsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxMDogLy8gQXV0aGVudGljYXRpb25TQVNMXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLm5hbWUgPSAnYXV0aGVudGljYXRpb25TQVNMJztcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UubWVjaGFuaXNtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1lY2hhbmlzbTogc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lY2hhbmlzbSA9IHRoaXMucmVhZGVyLmNzdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lY2hhbmlzbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLm1lY2hhbmlzbXMucHVzaChtZWNoYW5pc20pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gd2hpbGUgKG1lY2hhbmlzbSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxMTogLy8gQXV0aGVudGljYXRpb25TQVNMQ29udGludWVcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICdhdXRoZW50aWNhdGlvblNBU0xDb250aW51ZSc7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSB0aGlzLnJlYWRlci5zdHJpbmcobGVuZ3RoIC0gOCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxMjogLy8gQXV0aGVudGljYXRpb25TQVNMRmluYWxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2UubmFtZSA9ICdhdXRoZW50aWNhdGlvblNBU0xGaW5hbCc7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSB0aGlzLnJlYWRlci5zdHJpbmcobGVuZ3RoIC0gOCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBhdXRoZW50aWNhdGlvbk9rIG1lc3NhZ2UgdHlwZSAnICsgY29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyc2VFcnJvck1lc3NhZ2Uob2Zmc2V0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBieXRlczogQnVmZmVyLCBuYW1lOiBNZXNzYWdlTmFtZSkge1xyXG4gICAgICAgIHRoaXMucmVhZGVyLnNldEJ1ZmZlcihvZmZzZXQsIGJ5dGVzKTtcclxuICAgICAgICBjb25zdCBmaWVsZHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcclxuICAgICAgICBsZXQgZmllbGRUeXBlID0gdGhpcy5yZWFkZXIuc3RyaW5nKDEpO1xyXG4gICAgICAgIHdoaWxlIChmaWVsZFR5cGUgIT09ICdcXDAnKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tmaWVsZFR5cGVdID0gdGhpcy5yZWFkZXIuY3N0cmluZygpO1xyXG4gICAgICAgICAgICBmaWVsZFR5cGUgPSB0aGlzLnJlYWRlci5zdHJpbmcoMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtZXNzYWdlVmFsdWUgPSBmaWVsZHMuTTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9XHJcbiAgICAgICAgICAgIG5hbWUgPT09ICdub3RpY2UnID8gbmV3IE5vdGljZU1lc3NhZ2UobGVuZ3RoLCBtZXNzYWdlVmFsdWUpIDogbmV3IERhdGFiYXNlRXJyb3IobWVzc2FnZVZhbHVlLCBsZW5ndGgsIG5hbWUpO1xyXG5cclxuICAgICAgICBtZXNzYWdlLnNldmVyaXR5ID0gZmllbGRzLlM7XHJcbiAgICAgICAgbWVzc2FnZS5jb2RlID0gZmllbGRzLkM7XHJcbiAgICAgICAgbWVzc2FnZS5kZXRhaWwgPSBmaWVsZHMuRDtcclxuICAgICAgICBtZXNzYWdlLmhpbnQgPSBmaWVsZHMuSDtcclxuICAgICAgICBtZXNzYWdlLnBvc2l0aW9uID0gZmllbGRzLlA7XHJcbiAgICAgICAgbWVzc2FnZS5pbnRlcm5hbFBvc2l0aW9uID0gZmllbGRzLnA7XHJcbiAgICAgICAgbWVzc2FnZS5pbnRlcm5hbFF1ZXJ5ID0gZmllbGRzLnE7XHJcbiAgICAgICAgbWVzc2FnZS53aGVyZSA9IGZpZWxkcy5XO1xyXG4gICAgICAgIG1lc3NhZ2Uuc2NoZW1hID0gZmllbGRzLnM7XHJcbiAgICAgICAgbWVzc2FnZS50YWJsZSA9IGZpZWxkcy50O1xyXG4gICAgICAgIG1lc3NhZ2UuY29sdW1uID0gZmllbGRzLmM7XHJcbiAgICAgICAgbWVzc2FnZS5kYXRhVHlwZSA9IGZpZWxkcy5kO1xyXG4gICAgICAgIG1lc3NhZ2UuY29uc3RyYWludCA9IGZpZWxkcy5uO1xyXG4gICAgICAgIG1lc3NhZ2UuZmlsZSA9IGZpZWxkcy5GO1xyXG4gICAgICAgIG1lc3NhZ2UubGluZSA9IGZpZWxkcy5MO1xyXG4gICAgICAgIG1lc3NhZ2Uucm91dGluZSA9IGZpZWxkcy5SO1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xyXG4gICAgfVxyXG59XHJcbiJdLCJ2ZXJzaW9uIjozfQ==